# Basic Pentesting

---

Machine by [ashu](https://tryhackme.com/p/ashu)

Tryhackme [link](https://tryhackme.com/room/basicpentestingjt)

---

Tools Used:

- Kali Linux
- NMAP
- dirb
- enum4linux
- hydra
- python http server
- linpeas
- john the ripper

---
### 1. Nmap Scan
    We'll use an intense scan of nmap on the victim ip to get the current services:
    
    ![](img/basicPentesting1.png)

    This is the default page that we can see:

    ![](img/basicPentesting2.png)


### 2. dirb ennumeration

    Following the clue of the hidden service on the machine, and also that there is nothing on the first page of the machine i'll use dirb to see what i can find:

    The options i'll use are:
    `dirb http://VICTIM_IP/ -w /usr/share/wordlists/dirbuster/directory-list-1.0.txt`

    We can see that we've found a `/development/` folder:
    ![](img/basicPentesting3.png)
   
    Visiting this folder we can see two files `dev.txt` and `j.txt`

    This is the content of dev.txt:

    ![](img/basicPentesting4.png)

    And this is the contents of j.txt

    ![](img/basicPentesting5.png)

    With this we can extract that the machine is susceptible to a brute force attack and one of the user's username probably starts with a J.

### 3. SMB enumeration

    With enum4linux we can enumerate the contents and guess the users off of a smb share, simply by indicating the target machine:
    `enum4linux -m VICTIM_IP`

    ![](img/basicPentesting6.png)
    
    After some time we'll see that we've found the user `kay` and user `jan`:

    ![](img/basicPentesting7.png)

### 4. SSH Bruteforce

    Using hydra i'll attempt a bruteforce attack on the ssh service with the user `jan` as kay has indicated it has a weak password:

    ![](img/basicPentesting8.png)

    After some time i've found the password to be `armando`:

    ![](img/basicPentesting9.png)

### 5. Privilege Escalation

    First i'll download linPEAS from [github](https://github.com/carlospolop/PEASS-ng)


    Then setup a temporary webserver with python:

    ![](img/basicPentesting10.png)

    Since i want to transfer the script, i need a dircetry to place it in, for that i'll use `find / -writeable -type d 2>/dev/null` and i'll use the `/tmp` folder:

    ![](img/basicPentesting11.png)

    Then with wget i can download the file:

    ![](img/basicPentesting12.png)

### 6. Vulnerabilities listing:

    Now let's execute linpeas:

    ![](img/basicPentesting13.png)

    We can see user's kay's ssh key that we can copy and use for ourselve's:

    ![](img/basicPentesting14.png)

    Then using `ssh2john` we'll make the ssh key usable for john:

    ![](img/basicPentesting15.png)

    Using john the ripper we can crack the public kay key to get it's password:

    ![](img/basicPentesting16.png)

    Then we'll modify the key with read-write for the user, and import it with the key we got with john:

    ![](img/basicPentesting17.png)

### 7. SSH and get flag

    And ssh into the machine with user kay:

    ![](img/basicPentesting18.png)

    We can list the contents of kay's home and see the root flag on `pass.bak`:

    ![](img/basicPentesting19.png)
    
